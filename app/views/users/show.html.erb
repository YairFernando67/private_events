<% provide(:title, @user.name) %>

<div class="main_events">
  <div class="row">
    <div class="col-md-7 events-container">
      <% if logged_in? && @user.id == current_user.id %>
        <%= link_to "Create a new event", new_event_path, class: "create-event" %>
      <% end %>
      <% if @user.events.any? %>
        <br>
        <div class="user-event-details">
          <span class="label label-success"><%= @user.events.count %> events in your dashboard!!</span>
        </div>
        <%= render @user.events %>
      <% else %>
        <div class="create-event-container">
          <strong>You have no events!!!</strong>
        </div>
      <% end %>
    </div>
    <aside class="col-md-5">
      <section class="user_info">
        <h1>
          <%= @user.name %>
        </h1>
        <div>
          <h5>You have these events in your schedule!!</h5>
          <div class="event-buttons">
            <%= link_to 'Upcoming events', user_path(@user, params: { coming: 'true' }),
                  method: :get, class: '' %>
            <%= link_to 'Passed events', user_path(@user, params: { passed: 'true' }),
                  method: :get, class: '' %> 
          </div>
          <% if @events.any? %>
            <% @events.each do |e| %>
              <div class="coming_and_passed_events">
                <div class="header">
                  <h2>
                    <%= e.name %>
                  </h2>
                </div>
                <div class="body">
                  <p>
                    <%= fa_icon "map-marker" %>
                    <%= e.location %>
                  </p>
                  <span class="label label-success"><%= e.creator.name %> is hosting this event!!</span>
                  <p class="description"><%= e.description %></p>
                </div>
                <div class="footer">
                  <span class="label label-success"><%= e.date.strftime('%Y %B %d %I:%M%p') %></span>
                </div>
              </div>
            <% end %>
          <% end %>
        </div>
      </section>
    </aside>
  </div>

</div>
